<!DOCTYPE html>
<html>
	<!--
		2019-05-24	https://flaviocopes.com/broadcastchannel-api
		2019-05-24	https://developer.mozilla.org/en-US/docs/Web/API/BroadcastChannel/message_event#Live_example
	-->
	<head>
		<title>BroadcastChannel</title>
		<link rel="stylesheet" type="text/css" href="/WordEngineering/WordUnion/9432.css">
	</head>
	<body>
		<div align="center">
			<table>
				<tr>
					<td><label for="message">Message</td>
					<td>
						<textarea id="message" type="text" focus></textarea>
					</td>
				</tr>
				<tr>
					<td colspan="2" align="center">
						<input id="submitQuery" type="submit">
					</td>
				</tr>
			</table>
			<span id="received"></span>
		</div>	
		<script>
			function sender()
			{
				const channel = new BroadcastChannel('example-channel');
				const messageControl = document.querySelector('#message');
				const broadcastMessageButton = document.querySelector('#submitQuery');

				broadcastMessageButton.addEventListener('click', () => {
					channel.postMessage(messageControl.value);
				})
			}

			function receiver()
			{
				const channel = new BroadcastChannel('example-channel');
				channel.addEventListener('message', (event) => {
					received.textContent = event.data;
				});
			}
		
			window.addEventListener("load", sender, false);
			window.addEventListener("load", receiver, false);
		</script>
	</body>
</html>
