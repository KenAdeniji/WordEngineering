<!DOCTYPE html>
<html>
	<!--
		2025-10-26T10:44:00	Created.
		2025-08-01T05:30:00	Created. 2025-07-31 What does the link provide?
		2025-02-02T19:22:00
http://stackoverflow.com/questions/71501786/how-to-parse-html-response-from-fetch-api-to-iframe
export function isInternalLink(urlString: string): boolean | {
  pathname: string;
} {
  const url = new URL(urlString);
  if (url.origin !== window.location.origin) {
    return false;
  }
  return {
    pathname: url.pathname,
  };
}
		http://stackoverflow.com/questions/2910946/test-if-links-are-external-with-jquery-javascript
		http://stackoverflow.com/questions/2910946/test-if-links-are-external-with-jquery-javascript/18660968#18660968
		http://stackoverflow.com/questions/36631762/returning-html-with-fetch
		http://stackoverflow.com/questions/3999101/get-iframes-document-from-javascript-in-main-document
		
		2025-09-13T14:40:00 http://stackoverflow.com/questions/28430115/javascript-get-size-in-bytes-from-html-img-src
			https://kenadeniji.github.io/Github/2015-10-23DoctoralDissertation.html	
			
		2025-10-01
			PaulMcFedries.com
			FaceBook.com/PaulMcFedries
			Logophilia Limited
			Web Coding & Development
			All-in-one for dummies
			2nd edition
			Submit the form.
				form.addEventListener
				(
					"submit",
					(e) =>
					{
						//submit
					}
				);
				form.submit();
				myForm.submit
				(
					function(e)
					{
						e.preventDefault();
					}	
				);	
		2025-10-03T00:21:00 These are our children... these are us.
			Page load versus (VS) IFrame load.
		2025-10-03	What event is after IFrame load?
			document.addEventListener("DOMContentLoaded", function() {
			   // your code here
			}, false);
		
			http://stackoverflow.com/questions/11936816/execute-function-after-complete-page-load
			setTimeout(function(){
			 //your code here
			}, 3000);
		2025-10-24T07:00:00	List of attributes in an element?
		2025-10-24T02:07:00	What preference has his presence revealed?
			2025-10-24T08:53:00 SQL language for DOM?
			2025-10-24T09:07:00	Cascading Style Sheets (CSS) selector.
		2025-10-24T18:37:00	I was walking westward towards the intersection of Charter Square and Enea Court from Pegasus Center.
		2025-10-24T18:37:00	If an element inside an IFrame has an ID, provide an anchor hyperlink to the element.
		2025-10-24T18:42:00	Does the IFrame retrieve a default document from a domain name or a directory?
		2025-10-25T10:31:00	http://stackoverflow.com/questions/4187032/get-list-of-data-attributes-using-javascript-jquery
	-->	
	<head>
		<title>Document Object Model (DOM) DataSet</title>
		<meta charset="UTF-8"/>
		<meta name="description" content="Document Object Model (DOM) DataSet"/>
		<meta name="keyword" content="Document Object Model (DOM) DataSet"/>
		<meta name="robots" content="index, follow"/>
		<meta name="author" content="Ken Adeniji"/>
		<style>
			html, body
			{
			  height: 100%;
			  width: 100%;
			}
			
			table 
			{
			   border: 1px solid black;
			   border-spacing: 5px;
			   border-collapse: separate;
			}

			th, td 
			{ 
				padding:5px 10px; border:#4e95f4 1px solid;
			}

			th 
			{
				background: blue;
			}

			tr:nth-child(even) 
			{
				background: #E1EEF4;
			}
			
			textarea
			{ 
				height: 20vh;
				width: 95vw;
			}

			iframe
			{ 
				height: 20vh;
				width: 95vw;
			}

			#resultSet
			{ 
				height: 40vh;
				width: 95vw;
			}
		</style>	
	</head>
	<body>
		<div>
			<form method="post" id="formed" action="javascript:void(0);">
				<div align="center">
					<table>
							<tr>
							<td><label for="sourceAddress">Source Address:</label></td>
							<td>
								<input 
									id="sourceAddress"
									type="url"
									style="width: 55vw;"
									value="https://kenadeniji.github.io/Github/2015-10-23DoctoralDissertation.html"
								/>
							</td>
						</tr>
						<tr>
							<td><label for="sourceContent">Source Content:</label></td>
							<td>
								<textarea id="sourceContent"></textarea>
							</td>
						</tr>
						<tr>
							<td><label for="elementsSelector">Elements Selector:</label></td>
							<td>
								<textarea id="elementsSelector"></textarea>
							</td>
						</tr>
						<tr><td colspan="2" align="center"><input type="submit" id="submitQuery"></td></tr>
					</table>
				<div>	
			<form>	
			<iframe id="frameInfo"></iframe>
			<br/>	
			<div id="resultSet">
				<div id="resultSetElementTypeStatistics"></div>
				<div id="resultSetDataSetStatistics"></div>
			</div>
		</div>	
		<script>
			var isPostBack = false;
			var frameHTMLDocumentCurrent;
			
			const 	formedElement = document.getElementById("formed");
			const 	sourceAddressElement = document.getElementById("sourceAddress");
	
			const	sourceContentElement = document.getElementById("sourceContent");
			const	elementsSelectorElement = document.getElementById("elementsSelector");
			
			const 	querySubmitElement = document.getElementById("querySubmit");
			const 	submitQueryElement = document.getElementById("submitQuery");

			const	frameInfoElement = document.getElementById("frameInfo");
			const 	resultSetElement = document.getElementById("resultSet");
			
			const 	resultSetElementTypeStatisticsElement = document.getElementById("resultSetElementTypeStatistics");
			const	resultSetDataSetStatisticsElement = document.getElementById("resultSetDataSetStatistics");
			
			function pageLoad()
			{
				if (isPostBack === false)
				{
					const urlParams = new URLSearchParams(window.location.search);
					var sourceAddressParam = urlParams.get("sourceAddress");
					if (sourceAddressParam)
					{
						sourceAddressElement.value = sourceAddressParam;
					}	
					var elementsSelectorParam = urlParams.get("elementsSelector");
					elementsSelectorElement.value = elementsSelectorParam ? elementsSelectorParam : SelectorElementTypes;
					if (sourceAddressElement.value)
					{
						querySubmit();
					}	
					isPostBack = true;
				}
				else
				{
					querySubmit();
				}
 			}

			function querySubmit()
			{
				var	frameHTMLDocument;
				fetch
				(
					sourceAddressElement.value
				).then 
				( response => {
					const contentType = response.headers.get("content-type");
					if (contentType && contentType.indexOf("application/json") !== -1) 
					{
						return response.json().then
						(
							data => 
							{
								// process your JSON data further
								sourceContentElement.value = JSON.stringify(data);
							}
						);
					}
					else if 
					(
						contentType && contentType.indexOf("text/xml") !== -1
					) 
					{
						return response.text().then
						(
							data => 
							{
								// process your XML data further
								let parser = new DOMParser();
								let xml = parser.parseFromString(data, "application/xml");
								sourceContentElement.value = data;
							}
						);
					}
					else 
					{
						return response.text().then
						(
							text => 
							{
								// this is text, do something with it
								sourceContentElement.value = text;
								frameInfoElement.srcdoc = text;
								frameHTMLDocument = frameInfoElement.contentDocument || frameInfoElement.contentWindow.document;
								queryGenerateStatistics(frameHTMLDocument);
							}	
						);
					};
				});
			}

			function queryGenerateStatistics(frameHTMLDocument)
			{
				queryElementTypeStatistics(frameHTMLDocument);
				querySelectorElementDataSetStatistics(frameHTMLDocument);
			}

			function queryElementTypeStatistics(frameHTMLDocument)
			{
				var elementTypeCount;
				var elementStatistics = "<table><thead><tr><th>Element Type</th><th>Count</th></tr></thead><tbody>";
				for (const elementType of elementsSelectorElement.value)
				{
					elementTypeCount = frameHTMLDocument.querySelectorAll(elementType).length;
					elementStatistics += `<tr><td>${elementType}</td><td>${elementTypeCount}</td></tr>`;
				}
				elementStatistics += "</tbody></table>";
				resultSetElementTypeStatisticsElement.innerHTML = elementStatistics;
			}

			async function querySelectorElementDataSetStatistics(frameHTMLDocument)
			{
				var elementsSelectorDataSet = frameHTMLDocument.querySelectorAll(elementsSelectorElement.value);
				var elementsStatisticsHTML = "<table><caption>Element: dataset attributes</caption><thead><tr><th>Index</th><th>id</th><th>Tag Name</th></tr></thead><tbody>";
				var dateTime;
				var id;
				var anchor;
				var tagName;
				var dataSet;
				var dataKeys;
				var dictionary;
				var dataSetKeyValueIndex;
				for 
				(
					var elementIndex = 0, elementCount = elementsSelectorDataSet.length;
					elementIndex < elementCount;
					elementIndex++
				)
				{
					dateSet = elementsSelectorDataSet[elementIndex].dataset;

					dictionary = Object.keys(dateSet).map(key=>{ return elementsSelectorDataSet[elementIndex].dataset[key];});
					
					if (dictionary.length === 0)
					{
						continue;
					}	

					id = elementsSelectorDataSet[elementIndex].getAttribute("id");
					url = (id === null) ? "" : sourceAddressElement.value + "#" + id;
					anchor = (id === null) ? "" : `<a href=${url}>${id}</a>`;
					tagName = elementsSelectorDataSet[elementIndex].tagName;

					elementsStatisticsHTML += `<tr><td>${elementIndex + 1}</td><td>${anchor}</td><td>${tagName}</td></tr>`;

					elementsStatisticsHTML += "<tr><td colspan='3'><table><thead><tr><th>Index</th><th>Key</th><th>Value</th></tr></thead><tbody>";
					dataSetKeyValueIndex = 0;

					for (const [key, value] of Object.entries(dictionary))
					{
						elementsStatisticsHTML += `<tr><td>${dataSetKeyValueIndex + 1}</td><td>${key}</td><td>${value}</td></tr>`;
						++dataSetKeyValueIndex;	
					}
		
					elementsStatisticsHTML += "</td></tr></tbody></table>";
				}
				
				elementsStatisticsHTML += "</tbody></table>";
				
				resultSetDataSetStatisticsElement.innerHTML = elementsStatisticsHTML;
			}
			
			submitQueryElement.addEventListener("click", querySubmit, false);
		
			var body = document.getElementsByTagName("body")[0];
			body.onkeydown = function (e) 
			{
				if (e.keyCode === 13) 
				{  //enter key code
					querySubmit();
				}
			}

			window.addEventListener("load", pageLoad, false);
			
			const SelectorElementTypes = ["*"];
		</script>		
	</body>
</html>
