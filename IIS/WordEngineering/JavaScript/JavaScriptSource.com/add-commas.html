<html>
	<!--
		2015-09-23	Created.	http://www.javascriptsource.com/text-effects/add-commas.html
	-->
	<head>
		<title>Add Commas</title>
	</head>
	<body>
		<label for="numberInput">Number input:</label>
		<input id="numberInput" autofocus>
		<button id="query">Query</button>
		<br><br>
		<label for="numberOutput">Number output:</label>
		<label id="numberOutput"></label>
		<script>
			var isPostBack = false; 
			function pageLoad() { 
				if (!isPostBack) { 
					isPostBack = true;
					document.getElementById("numberInput").value = '20150923';
					process();
					document.getElementById("numberInput").focus();
				} 
			}
			function comma(number) {
				number = '' + number;
				if (number.length > 3) {
					var mod = number.length % 3;
					var output = (mod > 0 ? (number.substring(0,mod)) : '');
					for (i=0 ; i < Math.floor(number.length / 3); i++) {
						if ((mod == 0) && (i == 0))
						output += number.substring(mod+ 3 * i, mod + 3 * i + 3);
						else
						output+= ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
					}
					return (output);
				}
				else return number;
			}
			
			function process()
			{
				document.getElementById("numberOutput").innerHTML =
					comma(document.getElementById("numberInput").value);
			}

			window.addEventListener("load", pageLoad, false);
			document.getElementById("query").addEventListener("click", process, false);
			document.getElementById("numberInput").addEventListener("change", process, false);
		</script>
	</body>
</html>
